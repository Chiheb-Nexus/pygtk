2005-05-31  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* pango.override (pypango_layout_line_get_type): Fix copy function.

2005-05-29  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* pango.override (_wrap_pango_layout_line_x_to_index) 
	(_wrap_pango_layout_line_index_to_x) 
	(_wrap_pango_layout_line_get_extents) 
	(_wrap_pango_layout_line_get_pixel_extents): Impl.

	* gtk/gdk.override (_wrap_gdk_threads_init): Ignore
	gdk_draw_layout_line and gdk_draw_layout_line_with_colors, at
	least for now.

	* pango-types.defs (LayoutLine): Declare LayoutLine as boxed type.

	* pango.defs: pango_layout_line_ref and unref should not be
	exposed as python API.

	* pango.override (PANGO_TYPE_LAYOUT_LINE): Register boxed type for
	PangoLayoutLine, unless it's already defined.

	* pango.defs: Add defs for
	pango_font_metrics_get_underline_thickness,
	pango_font_metrics_get_underline_position,
	pango_font_metrics_get_strikethrough_thickness, and
	pango_font_metrics_get_strikethrough_position.

	* gobject/pygobject.c (pygobjectmeta_init): Don't register types
	that are already registered (have a __gtype__ attribute).

2005-05-28  Manish Singh  <yosh@gimp.org>

	* gobject/pygiochannel.c (pyg_iowatch_marshal): Pass the GIOCondition
	to PyObject_CallFunction.

2005-05-28  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (initgobject):
	* gobject/pygobject-private.h:
	* gobject/pygtype.c: (pyg_register_boxed_custom):
	Sort quark names. Rename pyg_boxed_marshal_key to pygboxed_marshal_key.
	Don't set the keys twice

2005-05-28  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/pygpointer.c (pyg_register_pointer): change quark name
	from pointer_type_id to pygpointer_class_key, for consistency;
	assume it to be already registered.

	* gobject/pygenum.c (pyg_enum_add): pygenum_class_id is already
	registered.

	* gobject/pygtype.c (pyg_register_boxed_custom):
	pyg_boxed_marshal_key is already registered.

	* gobject/pygobject.c (pygobject_register_class):
	pygobject_class_key is already registered.
	(pygobject_register_wrapper): pygobject_wrapper_key is already
	registered.
	(pygobject_new_with_interfaces): idem.
	(pygobject_new): pygobject_wrapper_key is already registered.

	* gobject/pygboxed.c (pyg_register_boxed): Don't register
	boxed_type_id, use pygboxed_type_key instead, which is assumed to
	be already registered.

	* gobject/gobjectmodule.c (initgobject): Register all the gquarks.
	(global): Remove the *_id static const strings, they are redundant now.

	* gobject/pygobject-private.h: Declare all the global gquarks.

2005-05-25  Manish Singh  <yosh@gimp.org>

	* gobject/pygiochannel.c: Pass gsize to GIOChannel functions that
	expect them.

2005-05-25  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* examples/gtk/widget.py (PyGtkWidget.do_realize): move_resize()
	window here as well.
	(PyGtkWidget.do_expose_event): Fix rectangle coordinates.
	(frame): Put custom widget in a frame (Christian Kirbach).

2005-05-22  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/test_signal.py: Update tests to deal with automatic
	registration.

	* examples/gobject/signal.py: Update example to not call
	gobject.type_register anymore.

	* gobject/pygobject.c: Add PyGObject_MetaType impl.
	(pygobject_register_class): Set the metaclass of new types to
	&PyGObject_MetaType.

	* gobject/gobjectmodule.c (pyg_type_register): split in two
	functions; one (pyg_type_register) that does all the work and
	return 0 on success or -1 on error; the other one
	( _wrap_pyg_type_register ) does the python argument parsing and
	calls the first one.
	(initgobject): Register the new PyGObject_MetaType type, which is
	a metaclass that automatically registers user defined GObject
	subclasses.

	Fixes #128765: GObject metaclass.

2005-05-22  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/gobjectmodule.c: Wrap g_markup_escape_text. Fixes #164665.

	* gtk/gtk.defs: Add gtk.EntryCompletion.get_text_column.
	Patch by Gian Mario Tagliaretti.

	* gtk/gdk.defs (save_to_callback): Add.

	* gtk/gdk.override (_wrap_gdk_pixbuf_save_to_callback): Wrap
	gdk_pixbuf_save_to_callback.  Fixes #172445.

	* gobject/pygiochannel.c: Add; implements GIOChannel wrappers.
	Fixes #139176: GIOChannel wrapper.

	* gobject/gobjectmodule.c (initgobject): Register IOChannel type
	and some constants.

	* gtk/gdk.defs: Add functions notify_startup_complete,
	get_display_arg_name, get_program_class, set_program_class, and
	get_display.  Fixes #167412.

2005-05-22   Tim Evans  <t.evans@aranz.com>

	* gtk/gtktreeview.override
	(_wrap_gtk_tree_view_map_expanded_rows): Don't unref borrowed
	reference data.user_data.  Reviewed by Gustavo Carneiro; Fixes
	#165373 (crash due to extra Py_XDECREF in
	gtk.TreeView.map_expanded_rows)

2005-05-17  Manish Singh  <yosh@gimp.org>

	* gobject/pygparamspec.c (pyg_param_spec_getattr): make it build
	again (missing })

2005-05-17  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/pygparamspec.c: (pygenum_from_pspec),
	(pygflags_from_pspec): Improve GParamSpec wrapping, fixes 
	bug #170614

2005-05-17  Benjamin Otte <in7y118@public.uni-hamburg.de>

	reviewed by: Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_register_class_init),
	(pyg_run_class_init): Allow multiple calls to 
	pyg_register_class_init, fixes bug #304353

2005-05-17  Benjamin Otte <in7y118@public.uni-hamburg.de>

	reviewed by: Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c:
	* gobject/pygobject-private.h:
	* gobject/pygobject.h:
	* gobject/pygtype.c: (pyg_closure_marshal),
	(pyg_closure_set_exception_handler): Adds exception handling
	support to closures, fixes bug #304357

2005-05-17  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: Bump version to 2.7.0

	* pango-types.defs (EllipsizeMode): Remove commas

	* pango.defs (get_font_description, get_ellipsize, set_ellipsize): 
	Add

2005-05-17  Johan Dahlin  <jdahlin@async.com.br>

	* ChangeLog.pre-2-6: Rename old ChangeLog

