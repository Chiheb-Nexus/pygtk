2006-01-11  Johan Dahlin  <jdahlin@async.com.br>

	* Makefile.am: Only install pygtk.pth if we're building gobject.

2006-01-10  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtk-types.defs (IconView): should implement gtk.CellLayout

2006-01-09  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* Makefile.am,
	* configure.in,
	* gtk/Makefile.am,
	* tests/Makefile.am: Fix pygobject check; Add external pygobject
	include dir to include path instead of the internal one if
	compiling with pygobject 2.9.

	* Makefile.am: Don't build or install gobject bindings if
	pygobject >= 2.9 was found.

	* configure.in: Check for pygobject 2.9; create an AM conditional
	based on it.

2006-01-04  Cedric Gustin  <cedric.gustin@gmail.com>

	* dsextras.py (Template.generate): Pass GLOBAL_MACROS (in
	particular HAVE_PYCAIRO) to codegen DefsParser.
	* setup.py: If pangocairo is enabled, add pycairo to the list of
	packages required to build the GTK+ module. Also set HAVE_PYCAIRO.

2005-12-24  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/pygflags.c (pyg_flags_add): Tolerate module == NULL,
	which may happen when called from pyg_flags_from_gtype if a
	wrapper for the GFlags was not registered.

2005-11-15  Johan Dahlin  <johan@gnome.org>

	* gobject/pygobject.c (pygobject_new_with_interfaces): We always
	need to free interfaces since its a null terminated array.

2005-11-13  Johan Dahlin  <johan@gnome.org>

	* gobject/gobjectmodule.c (pyg_type_register): Remove deprecation
	warning.
	
2005-11-13  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.defs (gtk_image_new_from_stock)
	(gtk_image_new_from_icon_set, image_new_from_animation)
	(gtk_image_new_from_icon_name)
	(gtk_radio_menu_item_new_from_widget)
	(gtk_radio_menu_item_new_with_mnemonic_from_widget)
	(gtk_radio_menu_item_new_with_label_from_widget): Add missing
	"(caller-owns-return #t)" -- fixes mem leaks.

2005-11-12  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gdk.override (_wrap_gdk_pixbuf_animation_iter_advance):
	Missing g_object_unref(ret), since caller owns the return value.

2005-11-11  Johan Dahlin  <jdahlin@async.com.br>

	* examples/gtk/sizegroup.py: New example.

2005-11-09  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gobject/pygobject.c (CHECK_GOBJECT): Use %p formatter instead of 0x%x.

	* gobject/pygobject-private.h (pyg_gil_state_ensure)
	(pyg_gil_state_release): Sync these macro definitions with the
	version in pygobject.h, i.e. don't call pygobject API
	replacements, call the Python API directly.

	* tests/Makefile.am (tests): Add test_glade.py.

	* tests/test_glade.py: Add this file which was missing from CVS.

	* gtk/gtk.defs (gtk_widget_render_icon): Add missing
	"(caller-owns-return #t)" to plug a leak.

2005-11-03  Manish Singh  <yosh@gimp.org> 

	reviewed by: Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_integer_richcompare):
	* gobject/pygenum.c: (pyg_enum_richcompare):
	* gobject/pygflags.c: (pyg_flags_richcompare):
	* gobject/pygobject-private.h:
	Prepare for Python 2.5 richcompare changes, fixes #320455.

2005-11-02  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/__init__.py: Remove '' from sys.path if it was added by
	PySys_SetArgv in init_gtk.

2005-10-15  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtkobject-support.c (pygtk_custom_destroy_notify): Add
	g_return_if_fail to catch user_data == NULL.

	* gtk/gtktreeview.override (pygtk_set_search_equal_func_marshal):
	Add some NULL parameter checks.  Use PyObject_IsTrue instead of
	comparing agains PyTrue.

2005-10-14  Johan Dahlin  <jdahlin@async.com.br>

	* tests/Makefile.am (tests): 
	* tests/test_gdk.py: Add test

	* gtk/gdk.defs (pixmap_create_from_data)
	(bitmap_create_from_data): use guchar* instead of gchar,
	fixes #318874 (Bob Gibbs)

2005-10-09  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: post release version bump

=== PyGTK 2.8.2 ===
2005-10-04  Johan Dahlin  <jdahlin@async.com.br>

	* NEWS: Update

2005-10-09  Johan Dahlin  <johan@gnome.org>

	* gobject/pygiochannel.c: (pyg_iowatch_marshal):
	Use GIL state instead of block/unblock. Fixes crasher found
	by Ole Andre Valda Ravn√•s.

2005-10-04  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: post release version bump

=== PyGTK 2.8.1 ===
2005-10-04  Johan Dahlin  <jdahlin@async.com.br>

	* NEWS: Update

2005-10-03  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/pygobject.c: (PyGProps_length):
	* gtk/gdk.defs:
	* gtk/gdk.override:
	* gtk/gtk.defs:
	* gtk/gtk.override:
	Fix gcc 4.0 warnings.

2005-10-02  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/test_properties.py (PropertyObject.__gproperties__)
	(PropertyObject.do_get_property, PropertyObject.do_set_property)
	(TestProperties.testUint64): Add guint64 property test case, by
	Johan Dahlin.

	* gobject/pygtype.c (pyg_value_from_pyobject): Accept conversion
	from PyInt (not just PyLong) to guint64.
	(_wrap_g_type_wrapper__get_children): Fix sign/unsigned warning.
	(_wrap_g_type_wrapper__get_interfaces): idem.
	(pyg_value_from_pyobject): idem.

2005-10-01  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/test_subtype.py (TestSubType.testGObjectNewError): Add new
	test for the bug below.

	* gobject/gobjectmodule.c (pyg_object_new): don't unref/sink obj
	if it is NULL.

2005-09-29  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_type_name), (pyg_type_from_name),
	(pyg_type_parent), (pyg_type_is_a), (pyg_type_children),
	(pyg_type_interfaces): Undeprecate for now.

2005-09-28  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* tests/Makefile.am (tests): Add test_textview.py.

	* tests/test_textview.py: Test gtk.TextView.get_default_attributes().

	* gtk/gtktextview.override
	(_wrap_gtk_text_view_get_default_attributes): Override to
	workaround gtk bug #317455.

	* pangomodule.c (initpango): Fix values of pango.SCALE_X_LARGE and
	pango.SCALE_XX_LARGE.

2005-09-25  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/Makefile.am (EXTRA_DIST): Add leak.glade.

	* tests/test_glade.py: Test case for the leak below.

	* gtk/libglade.override (connect_many): Fix a reference leak in 'tuple'.

2005-09-22  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_type_from_name):
	* gobject/pygobject.c: (pygobject_connect),
	(pygobject_connect_after), (pygobject_connect_object),
	(pygobject_connect_object_after), (pygobject_emit),
	(pygobject_stop_emission):
	Include the object and the name of the signal in TypeErrors

2005-09-20  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtk.defs (Entry.set_completion): Add null-ok

2005-09-16  John Ehresman  <jpe@wingware.com>

	* gtk/gdk.override (_wrap_gdk_event_tp_setattr): Allow subwindow
	to be set for enter & leave notify events.

2005-09-16  John Ehresman  <jpe@wingware.com>

	* gobjectmodule.c (initgobject): Add gobject.Warning Warning subclass
	and redirect all g_log messages for the "GLib", "Glib-GObject", and 
	"GThread" domains to the python warning system

	* pangomodule.c (initpango): Add pango.Warning Warning subclass
	and redirect all g_log messages for the "Pango" domain to the 
	python warning system

	* gtkmodule.c (initgtk): Move gtk Warning subclass from the gdk
	module to the gtk module and added redirections for g_log messages 
	for the "Gdk" and "GdkPixbuf" domains to the python warning system

	* gtk/__init__.py: Set gdk.Warning = gtk.Warning for backward
	compatibility

2005-09-13  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gdk.defs:
	* gtk/gtk.defs:
	* gtk/gtk.override:
	* gtk/gtktextview.override:
	* gtk/gtktreeview.override:
	* gtk/gtkwidget.override:

	Revert Johns latest commit.

2005-09-13  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/gobjectmodule.c (add_properties): Append extra
	information to the exception value strings to help contextualize
	any errors that occur while registering properties.

2005-09-06  John Finlay  <finlay@moeraki.com>

	* gtk/gdk.defs (set_urgency_hint): Add.

	* gtk/gtktreeview.override (_wrap_gtk_tree_view_get_visible_range):
	Add.

	* gtk/gtk.defs (set_drag_dest_item): Allow path to be None.
	(get_visible_range): Add.

2005-09-05  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.defs (set_cursor): Allow cell to be None

	* gtk/gtkwidget.override (_wrap_gtk_drag_source_set_icon_name1): Add.

	* gtk/gtk.defs (gtk_drag_source_set_icon_name): Add as a widget method
	and deprecate function gtk.drag_source_set_icon_name.

	* gtk/gdk.defs (set_icon_name): Add.

	* gtk/gtktextview.override (_wrap_gtk_text_view_get_iter_at_position):
	Add.

	* gtk/gtk.override (_wrap_gtk_clipboard_request_image): Add.

	* gtk/gtk.defs (gtk_alternative_dialog_button_order)
	(gtk_clipboard_request_image, gtk_clipboard_wait_for_image)
	(gtk_clipboard_set_image, gtk_clipboard_wait_is_image_available)
	(drag_source_add_iamge_targets, drag_source_add_uri_targets):
	Add defs.

2005-09-02  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/pygparamspec.c (pyg_param_spec_getattr): Sort all attributes
	alphabetically, like python does. Set default value to None
	(pyg_param_spec_getattr): Add default_values fallback, for backwards
	compatibility.

2005-09-02  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/gobjectmodule.c (_wrap_pyg_type_register): Don't crash
	when registering non-types.

	* tests/test_subtype.py: Test registering non-types raises
	TypeError.

	Fixes #315100: "gobject.type_register crashes if parameter is not
	a type."

2005-09-02  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_signal_list_names):
	Also include interfaces, fixes #315038

2005-09-02  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: post release version bump

	* Changelog.pre-2-8: Move old changelog

